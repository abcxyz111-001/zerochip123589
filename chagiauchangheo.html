<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="mobile-web-app-capable" content="yes">
    <title>D·∫°y Con L√†m Gi√†u - ƒê·ªçc S√°ch Online</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #4a90e2;
            --secondary-color: #f39c12;
            --dark-bg: #1a1a1a;
            --dark-text: #e0e0e0;
            --light-bg: #ffffff;
            --light-text: #333333;
            --sidebar-width: min(300px, 85vw);
            --header-height: clamp(50px, 8vh, 70px);
            
            /* Responsive font sizes */
            --font-base: clamp(14px, 2vw, 18px);
            --font-small: clamp(12px, 1.5vw, 14px);
            --font-large: clamp(18px, 2.5vw, 24px);
            --font-xlarge: clamp(24px, 3vw, 36px);
            
            /* Responsive spacing */
            --spacing-xs: clamp(4px, 1vw, 8px);
            --spacing-sm: clamp(8px, 1.5vw, 12px);
            --spacing-md: clamp(12px, 2vw, 20px);
            --spacing-lg: clamp(20px, 3vw, 40px);
            --spacing-xl: clamp(30px, 4vw, 60px);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--light-bg);
            color: var(--light-text);
            transition: all 0.3s ease;
            overflow-x: hidden;
            font-size: var(--font-base);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body.dark-mode {
            background: var(--dark-bg);
            color: var(--dark-text);
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            width: 100%;
            height: var(--header-height);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 var(--spacing-md);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            flex: 1;
            min-width: 0;
        }

        .menu-toggle {
            background: none;
            border: none;
            color: white;
            font-size: clamp(20px, 3vw, 28px);
            cursor: pointer;
            transition: transform 0.3s ease;
            padding: var(--spacing-xs);
            flex-shrink: 0;
        }

        .menu-toggle:hover {
            transform: scale(1.1);
        }

        .book-info {
            color: white;
            min-width: 0;
            flex: 1;
        }

        .book-title {
            font-size: clamp(14px, 2.5vw, 20px);
            font-weight: bold;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .book-author {
            font-size: clamp(11px, 1.8vw, 14px);
            opacity: 0.9;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .header-controls {
            display: flex;
            gap: var(--spacing-sm);
            align-items: center;
            flex-shrink: 0;
        }

        /* Control Buttons */
        .control-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: clamp(6px, 1vw, 10px) clamp(8px, 1.5vw, 15px);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            font-size: var(--font-small);
            white-space: nowrap;
        }

        .control-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        .control-btn span:last-child {
            display: none;
        }

        @media (min-width: 480px) {
            .control-btn span:last-child {
                display: inline;
            }
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            left: 0;
            top: var(--header-height);
            width: var(--sidebar-width);
            height: calc(100vh - var(--header-height));
            height: calc(100dvh - var(--header-height));
            background: #f5f5f5;
            overflow-y: auto;
            transition: transform 0.3s ease;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            z-index: 999;
        }

        body.dark-mode .sidebar {
            background: #2a2a2a;
        }

        .sidebar.hidden {
            transform: translateX(-100%);
        }

        .chapter-list {
            padding: 20px;
        }

        .chapter-item {
            padding: 12px 15px;
            margin-bottom: 8px;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        body.dark-mode .chapter-item {
            background: #3a3a3a;
        }

        .chapter-item:hover {
            transform: translateX(5px);
            border-left-color: var(--primary-color);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .chapter-item.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-left-color: transparent;
        }

        /* Main Content */
        .main-content {
            margin-left: 0;
            margin-top: var(--header-height);
            padding: var(--spacing-lg);
            transition: all 0.3s ease;
            min-height: calc(100vh - var(--header-height));
            min-height: calc(100dvh - var(--header-height));
        }

        @media (min-width: 1024px) {
            .main-content {
                margin-left: var(--sidebar-width);
            }
            
            .main-content.full-width {
                margin-left: 0;
            }
            
            .sidebar {
                transform: translateX(0) !important;
            }
            
            .sidebar.hidden {
                transform: translateX(-100%) !important;
            }
        }

        .content-wrapper {
            max-width: min(900px, 100%);
            margin: 0 auto;
            background: white;
            padding: clamp(15px, 4vw, 40px);
            border-radius: clamp(8px, 1.5vw, 15px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
            line-height: 1.8;
            font-size: clamp(16px, 2.2vw, 20px);
        }

        body.dark-mode .content-wrapper {
            background: #2a2a2a;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }

        /* Reading Progress */
        .reading-progress {
            position: fixed;
            top: var(--header-height);
            left: 0;
            width: 0%;
            height: 3px;
            background: linear-gradient(90deg, #f39c12 0%, #e74c3c 100%);
            transition: width 0.3s ease;
            z-index: 1001;
        }

        /* Font Size Controls */
        .font-controls {
            position: fixed;
            right: clamp(10px, 2vw, 20px);
            bottom: clamp(80px, 12vh, 100px);
            display: flex;
            flex-direction: column;
            gap: clamp(8px, 1.5vw, 12px);
            z-index: 998;
        }

        .font-btn {
            width: clamp(35px, 6vw, 45px);
            height: clamp(35px, 6vw, 45px);
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            border: none;
            cursor: pointer;
            font-size: clamp(14px, 2.5vw, 20px);
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .font-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        /* Bookmark */
        .bookmark-btn {
            position: fixed;
            right: clamp(10px, 2vw, 20px);
            bottom: clamp(140px, 20vh, 160px);
            width: clamp(40px, 7vw, 55px);
            height: clamp(40px, 7vw, 55px);
            border-radius: 50%;
            background: #e74c3c;
            color: white;
            border: none;
            cursor: pointer;
            font-size: clamp(16px, 3vw, 24px);
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 998;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .bookmark-btn:hover {
            transform: scale(1.1) rotate(10deg);
        }

        .bookmark-btn.bookmarked {
            background: #27ae60;
        }

        /* Back to Top */
        .back-to-top {
            position: fixed;
            right: clamp(10px, 2vw, 20px);
            bottom: clamp(20px, 4vh, 40px);
            width: clamp(40px, 7vw, 55px);
            height: clamp(40px, 7vw, 55px);
            border-radius: 50%;
            background: var(--secondary-color);
            color: white;
            border: none;
            cursor: pointer;
            font-size: clamp(16px, 3vw, 24px);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 998;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .back-to-top:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }

        /* Chapter Navigation */
        .chapter-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
        }

        .chapter-nav-btn {
            padding: 10px 20px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .chapter-nav-btn:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .chapter-nav-btn.prev:hover {
            transform: translateX(-5px);
        }

        .chapter-nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Search Box */
        .search-box {
            padding: 15px 20px;
            border-bottom: 1px solid #ddd;
        }

        .search-input {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 25px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        body.dark-mode .search-input {
            background: #3a3a3a;
            border-color: #555;
            color: white;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
        }

        /* Reading Time */
        .reading-time {
            display: flex;
            align-items: center;
            gap: 5px;
            color: white;
            font-size: 14px;
            background: rgba(255,255,255,0.2);
            padding: 5px 12px;
            border-radius: 15px;
        }

        /* Tooltip */
        .tooltip {
            position: absolute;
            background: #333;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            white-space: nowrap;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1002;
        }

        .tooltip.show {
            opacity: 1;
        }

        /* Mobile Responsive */
        
        /* Extra Small Devices (phones, 360px and down) */
        @media only screen and (max-width: 360px) {
            .content-wrapper {
                font-size: 14px !important;
            }
            
            .header {
                height: 50px;
            }
            
            .book-author {
                display: none;
            }
        }
        
        /* Small Devices (phones, 361px - 480px) */
        @media only screen and (min-width: 361px) and (max-width: 480px) {
            .content-wrapper {
                font-size: 15px !important;
            }
        }
        
        /* Medium Devices (tablets, 481px - 768px) */
        @media only screen and (min-width: 481px) and (max-width: 768px) {
            .content-wrapper {
                font-size: 16px !important;
            }
            
            .sidebar {
                width: 280px;
            }
        }
        
        /* Large Devices (small laptops, 769px - 1024px) */
        @media only screen and (min-width: 769px) and (max-width: 1024px) {
            .content-wrapper {
                font-size: 17px !important;
            }
        }
        
        /* Extra Large Devices (desktops, 1025px - 1440px) */
        @media only screen and (min-width: 1025px) and (max-width: 1440px) {
            .content-wrapper {
                font-size: 18px !important;
            }
        }
        
        /* Ultra Wide (large desktops, 1441px and up) */
        @media only screen and (min-width: 1441px) {
            .content-wrapper {
                font-size: 19px !important;
                max-width: 1000px;
            }
            
            .main-content {
                padding: 60px;
            }
        }
        
        /* Portrait orientation specific */
        @media only screen and (orientation: portrait) and (max-width: 768px) {
            .sidebar {
                width: 85vw;
                max-width: 320px;
            }
            
            .font-controls {
                bottom: 15vh;
            }
            
            .bookmark-btn {
                bottom: 22vh;
            }
            
            .back-to-top {
                bottom: 5vh;
            }
        }
        
        /* Landscape orientation specific */
        @media only screen and (orientation: landscape) and (max-height: 600px) {
            .header {
                height: 45px;
            }
            
            .content-wrapper {
                padding: 15px;
            }
            
            .font-controls,
            .bookmark-btn,
            .back-to-top {
                transform: scale(0.8);
            }
        }
        
        /* Touch devices */
        @media (hover: none) and (pointer: coarse) {
            .control-btn,
            .font-btn,
            .bookmark-btn,
            .back-to-top,
            .chapter-nav-btn {
                padding: 12px 20px;
                min-height: 44px;
                min-width: 44px;
            }
            
            .chapter-item {
                padding: 15px;
                margin-bottom: 10px;
            }
        }
        
        /* High DPI screens */
        @media only screen and (-webkit-min-device-pixel-ratio: 2),
               only screen and (min-resolution: 192dpi) {
            body {
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }
        }
        
        /* Foldable devices */
        @media only screen and (min-width: 320px) and (max-width: 768px) 
               and (min-height: 600px) and (max-height: 900px) {
            .sidebar {
                width: min(90vw, 350px);
            }
        }
        
        /* Print styles */
        @media print {
            .header,
            .sidebar,
            .font-controls,
            .bookmark-btn,
            .back-to-top,
            .chapter-nav {
                display: none !important;
            }
            
            .main-content {
                margin: 0;
                padding: 0;
            }
            
            .content-wrapper {
                box-shadow: none;
                border-radius: 0;
                padding: 0;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeOut {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
            }
        }

        .content-wrapper {
            animation: fadeIn 0.5s ease;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        body.dark-mode ::-webkit-scrollbar-track {
            background: #2a2a2a;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #3a7bc8;
        }

        /* Highlight */
        ::selection {
            background: rgba(74, 144, 226, 0.3);
            color: inherit;
        }

        /* Loading Spinner */
        .loading {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1003;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            width: clamp(40px, 10vw, 60px);
            height: clamp(40px, 10vw, 60px);
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Safe area insets for notch devices */
        @supports (padding: env(safe-area-inset-top)) {
            .header {
                padding-top: env(safe-area-inset-top);
                height: calc(var(--header-height) + env(safe-area-inset-top));
            }
            
            .sidebar {
                top: calc(var(--header-height) + env(safe-area-inset-top));
                height: calc(100vh - var(--header-height) - env(safe-area-inset-top));
                padding-bottom: env(safe-area-inset-bottom);
            }
            
            .main-content {
                margin-top: calc(var(--header-height) + env(safe-area-inset-top));
                padding-bottom: env(safe-area-inset-bottom);
            }
            
            .font-controls,
            .bookmark-btn,
            .back-to-top {
                margin-bottom: env(safe-area-inset-bottom);
            }
        }
    </style>
</head>
<body>
    <!-- Reading Progress Bar -->
    <div class="reading-progress" id="readingProgress"></div>

    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <button class="menu-toggle" id="menuToggle" title="Menu">‚ò∞</button>
            <div class="book-info">
                <div class="book-title">D·∫°y Con L√†m Gi√†u - T·∫≠p 1</div>
                <div class="book-author">Robert Kiyosaki & Sharon Lechter</div>
            </div>
        </div>
        <div class="header-controls">
            <div class="reading-time">
                <span>‚è±</span>
                <span id="readingTime">15 ph√∫t</span>
            </div>
            <button class="control-btn" id="themeToggle" title="Ch·∫ø ƒë·ªô t·ªëi">
                <span id="themeIcon">üåô</span>
                <span>Ch·∫ø ƒë·ªô t·ªëi</span>
            </button>
            <button class="control-btn" id="fullscreenToggle" title="To√†n m√†n h√¨nh">
                <span>‚õ∂</span>
                <span>To√†n m√†n h√¨nh</span>
            </button>
        </div>
    </header>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="search-box">
            <input type="text" class="search-input" id="searchInput" placeholder="T√¨m ki·∫øm ch∆∞∆°ng...">
        </div>
        <div class="chapter-list" id="chapterList">
            <div class="chapter-item active" data-chapter="0">L·ªùi n√≥i ƒë·∫ßu</div>
            <div class="chapter-item" data-chapter="1">Ch∆∞∆°ng 1: Cha Gi√†u, Cha Ngh√®o</div>
            <div class="chapter-item" data-chapter="2">Ch∆∞∆°ng 2: Ng∆∞·ªùi gi√†u kh√¥ng l√†m vi·ªác v√¨ ti·ªÅn</div>
            <div class="chapter-item" data-chapter="3">Ch∆∞∆°ng 3: T·∫°i sao ph·∫£i d·∫°y con v·ªÅ t√†i ch√≠nh?</div>
            <div class="chapter-item" data-chapter="4">Ch∆∞∆°ng 4: H√£y nghƒ© ƒë·∫øn vi·ªác kinh doanh c·ªßa m√¨nh</div>
            <div class="chapter-item" data-chapter="5">Ch∆∞∆°ng 5: L·ªãch s·ª≠ c·ªßa thu·∫ø</div>
            <div class="chapter-item" data-chapter="6">Ch∆∞∆°ng 6: Ng∆∞·ªùi gi√†u t·∫°o ra ti·ªÅn</div>
            <div class="chapter-item" data-chapter="7">Ch∆∞∆°ng 7: L√†m vi·ªác ƒë·ªÉ h·ªçc</div>
            <div class="chapter-item" data-chapter="8">Ch∆∞∆°ng 8: V∆∞·ª£t ch∆∞·ªõng ng·∫°i v·∫≠t</div>
            <div class="chapter-item" data-chapter="9">Ch∆∞∆°ng 9: S·ª± kh·ªüi ƒë·∫ßu</div>
            <div class="chapter-item" data-chapter="10">Ch∆∞∆°ng 10: V·∫´n c√≤n mu·ªën nhi·ªÅu h∆°n?</div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">
        <div class="content-wrapper" id="contentWrapper">
            <div id="bookContent">
                <!-- Content will be loaded here -->
            </div>
            <div class="chapter-nav">
                <button class="chapter-nav-btn prev" id="prevChapter" disabled>‚Üê Ch∆∞∆°ng tr∆∞·ªõc</button>
                <button class="chapter-nav-btn next" id="nextChapter">Ch∆∞∆°ng sau ‚Üí</button>
            </div>
        </div>
    </main>

    <!-- Font Controls -->
    <div class="font-controls">
        <button class="font-btn" id="fontDecrease" title="Gi·∫£m c·ª° ch·ªØ">A-</button>
        <button class="font-btn" id="fontIncrease" title="TƒÉng c·ª° ch·ªØ">A+</button>
    </div>

    <!-- Bookmark Button -->
    <button class="bookmark-btn" id="bookmarkBtn" title="ƒê√°nh d·∫•u">üîñ</button>

    <!-- Back to Top -->
    <button class="back-to-top" id="backToTop" title="L√™n ƒë·∫ßu trang">‚Üë</button>

    <!-- Loading Spinner -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
    </div>

    <script>
        // Book Content Data
        const bookChapters = [
            {
                title: "L·ªùi n√≥i ƒë·∫ßu",
                content: `
                    <h2>L·ªùi n√≥i ƒë·∫ßu</h2>
                    <p>M·ªôt trong nh·ªØng nguy√™n nh√¢n khi·∫øn ng∆∞·ªùi gi√†u ng√†y c√†ng gi√†u, ng∆∞·ªùi ngh√®o ng√†y c√†ng ngh√®o, c√≤n gi·ªõi trung l∆∞u th√¨ th∆∞·ªùng m·∫Øc n·ª£ ch√≠nh l√† v√¨ ch·ªß ƒë·ªÅ ti·ªÅn b·∫°c th∆∞·ªùng ƒë∆∞·ª£c d·∫°y ·ªü nh√† ch·ª© kh√¥ng ph·∫£i ·ªü tr∆∞·ªùng.</p>
                    <p>H·∫ßu h·∫øt ch√∫ng ta h·ªçc c√°ch x·ª≠ l√Ω ti·ªÅn b·∫°c t·ª´ cha m·∫π m√¨nh, v√† th∆∞·ªùng th√¨ ng∆∞·ªùi ngh√®o kh√¥ng d·∫°y con v·ªÅ ti·ªÅn b·∫°c m√† ch·ªâ n√≥i ƒë∆°n gi·∫£n l√†: "H√£y ƒë·∫øn tr∆∞·ªùng v√† h·ªçc cho chƒÉm ch·ªâ." V√† r·ªìi ƒë·ª©a tr·∫ª c√≥ th·ªÉ s·∫Ω t·ªët nghi·ªáp v·ªõi m·ªôt s·ªë ƒëi·ªÉm xu·∫•t s·∫Øc nh∆∞ng v·ªõi m·ªôt ƒë·∫ßu √≥c ngh√®o n√†n v·ªÅ c√°ch qu·∫£n l√Ω ti·ªÅn b·∫°c, v√¨ tr∆∞·ªùng h·ªçc kh√¥ng d·∫°y v·ªÅ chuy·ªán ti·ªÅn nong m√† ch·ªâ t·∫≠p trung v√†o vi·ªác gi√°o d·ª•c s√°ch v·ªü v√† nh·ªØng k·ªπ nƒÉng ngh·ªÅ nghi·ªáp m√† kh√¥ng n√≥i g√¨ v·ªÅ k·ªπ nƒÉng t√†i ch√≠nh.</p>
                    <p>ƒê√≥ ch√≠nh l√† l√Ω do t·∫°i sao nh·ªØng nh√¢n vi√™n ng√¢n h√†ng, b√°c sƒ©, k·∫ø to√°n th√¥ng minh d√π ƒë·∫°t ƒë∆∞·ª£c nhi·ªÅu ƒëi·ªÉm s·ªë xu·∫•t s·∫Øc ·ªü tr∆∞·ªùng nh∆∞ng l·∫°i g·∫∑p nhi·ªÅu r·∫Øc r·ªëi t√†i ch√≠nh su·ªët ƒë·ªùi. V√† nh·ªØng m√≥n n·ª£ qu·ªëc gia ch√≥ng m·∫∑t th∆∞·ªùng b·∫Øt ngu·ªìn t·ª´ nh·ªØng v·ªã l√£nh ƒë·∫°o c√≥ h·ªçc v·∫•n cao, nh∆∞ng ch·ªâ ƒë∆∞·ª£c hu·∫•n luy·ªán r·∫•t √≠t ho·∫∑c kh√¥ng c√≥ ch√∫t k·ªπ nƒÉng n√†o v·ªÅ v·∫•n ƒë·ªÅ t√†i ch√≠nh.</p>
                    <p>M·ªôt qu·ªëc gia c√≥ th·ªÉ t·ªìn t·∫°i nh∆∞ th·∫ø n√†o n·∫øu vi·ªác d·∫°y tr·∫ª con qu·∫£n l√Ω ti·ªÅn b·∫°c v·∫´n l√† tr√°ch nhi·ªám c·ªßa ph·ª• huynh, m√† h·∫ßu h·∫øt h·ªç kh√¥ng c√≥ nhi·ªÅu ki·∫øn th·ª©c v·ªÅ v·∫•n ƒë·ªÅ n√†y?</p>
                    <p>Ch√∫ng ta ph·∫£i l√†m g√¨ ƒë·ªÉ thay ƒë·ªïi s·ªë ph·∫≠n ti·ªÅn b·∫°c l·∫≠n ƒë·∫≠n c·ªßa m√¨nh? Nh√† gi√†u ƒë√£ l√†m gi√†u nh∆∞ th·∫ø n√†o t·ª´ hai b√†n tay tr·∫Øng?...</p>
                    <p>C√≥ l·∫Ω b·∫°n s·∫Ω t√¨m th·∫•y cho m√¨nh nh·ªØng l·ªùi gi·∫£i ƒë√°p v·ªÅ c√°c v·∫•n ƒë·ªÅ ƒë√≥ trong cu·ªën s√°ch n√†y.</p>
                `
            },
            {
                title: "Ch∆∞∆°ng 1: Cha Gi√†u, Cha Ngh√®o",
                content: `
                    <h2>CH∆Ø∆†NG 1: Cha Gi√†u, Cha Ngh√®o</h2>
                    <h3>ROBERT KIYOSAKI K·ªÉ</h3>
                    <p>T√¥i c√≥ hai ng∆∞·ªùi cha, m·ªôt ng∆∞·ªùi gi√†u v√† m·ªôt ng∆∞·ªùi ngh√®o - m·ªôt ng∆∞·ªùi cha ru·ªôt v√† m·ªôt ng∆∞·ªùi cha nu√¥i (cha c·ªßa Mike - b·∫°n t√¥i). Cha ru·ªôt t√¥i ƒë√£ c√≥ b·∫±ng th·∫°c sƒ©, c√≤n ng∆∞·ªùi cha nu√¥i th√¨ ch∆∞a h·ªçc h·∫øt l·ªõp t√°m, nh∆∞ng c·∫£ hai ng∆∞·ªùi ƒë·ªÅu th√†nh c√¥ng trong s·ª± nghi·ªáp v√† c√≥ ·∫£nh h∆∞·ªüng ƒë·∫øn ng∆∞·ªùi kh√°c. C·∫£ hai ƒë·ªÅu khuy√™n b·∫£o t√¥i r·∫•t nhi·ªÅu ƒëi·ªÅu, nh∆∞ng nh·ªØng l·ªùi khuy√™n ƒë√≥ kh√¥ng gi·ªëng nhau. C·∫£ hai ƒë·ªÅu tin t∆∞·ªüng m√£nh li·ªát v√†o s·ª± h·ªçc nh∆∞ng l·∫°i khuy√™n t√¥i h·ªçc nh·ªØng kh√≥a h·ªçc kh√°c nhau.</p>
                    <p>N·∫øu t√¥i ch·ªâ c√≥ m·ªôt ng∆∞·ªùi cha, t√¥i s·∫Ω ho·∫∑c ch·∫•p nh·∫≠n ho·∫∑c ph·∫£n ƒë·ªëi √Ω ki·∫øn c·ªßa √¥ng. C√≥ hai ng∆∞·ªùi cha d·∫°y b·∫£o, t√¥i th·∫•y ƒë∆∞·ª£c nh·ªØng quan ƒëi·ªÉm tr√°i ng∆∞·ª£c nhau gi·ªØa m·ªôt ng∆∞·ªùi gi√†u v√† m·ªôt ng∆∞·ªùi ngh√®o. V√† thay v√¨ ch·ªâ ƒë∆°n gi·∫£n ch·∫•p nh·∫≠n hay ph·∫£n ƒë·ªëi ng∆∞·ªùi n√†y hay ng∆∞·ªùi kia, t√¥i ƒë√£ c·ªë suy nghƒ© nhi·ªÅu h∆°n, so s√°nh v√† l·ª±a ch·ªçn cho ch√≠nh m√¨nh.</p>
                    <p>C·∫£ hai ng∆∞·ªùi cha c·ªßa t√¥i khi b·∫Øt ƒë·∫ßu t·∫°o d·ª±ng s·ª± nghi·ªáp ƒë·ªÅu ph·∫£i ƒë·∫•u tranh v·ªõi chuy·ªán ti·ªÅn nong, nh∆∞ng c·∫£ hai c√≥ nh·ªØng quan ƒëi·ªÉm kh√°c nhau v·ªÅ v·∫•n ƒë·ªÅ ti·ªÅn b·∫°c.</p>
                    <p>V√≠ d·ª•, cha ru·ªôt t√¥i th∆∞·ªùng n√≥i: "Ham m√™ ti·ªÅn b·∫°c l√† ngu·ªìn g·ªëc c·ªßa m·ªçi ƒëi·ªÅu x·∫•u." C√≤n cha nu√¥i c·ªßa t√¥i l·∫°i b·∫£o r·∫±ng: "Thi·∫øu th·ªën ti·ªÅn b·∫°c l√† ngu·ªìn g·ªëc c·ªßa m·ªçi ƒëi·ªÅu x·∫•u."</p>
                    <p>Nh·ªØng s·ª± kh√°c nhau trong quan ƒëi·ªÉm c·ªßa h·ªç, nh·∫•t l√† khi ƒë·ªÅ c·∫≠p ƒë·∫øn ti·ªÅn b·∫°c, khi·∫øn t√¥i tr·ªü n√™n t√≤ m√≤ v√† b·∫Øt ƒë·∫ßu suy nghƒ©...</p>
                    <p>V√¨ c√≥ hai ng∆∞·ªùi cha ƒë·∫ßy ·∫£nh h∆∞·ªüng, t√¥i ƒë√£ h·ªçc t·ª´ c·∫£ hai ng∆∞·ªùi. T√¥i suy nghƒ© v·ªÅ l·ªùi khuy√™n c·ªßa m·ªói ng∆∞·ªùi, v√† nh·ªù v·∫≠y, t√¥i c√≥ ƒë∆∞·ª£c m·ªôt hi·ªÉu bi·∫øt s√¢u s·∫Øc v·ªÅ quy·ªÅn l·ª±c v√† t√°c ƒë·ªông c·ªßa suy nghƒ© l√™n cu·ªôc s·ªëng con ng∆∞·ªùi nh∆∞ th·∫ø n√†o.</p>
                `
            },
            {
                title: "Ch∆∞∆°ng 2: Ng∆∞·ªùi gi√†u kh√¥ng l√†m vi·ªác v√¨ ti·ªÅn",
                content: `
                    <h2>CH∆Ø∆†NG 2: B√†i 1 - Ng∆∞·ªùi gi√†u kh√¥ng l√†m vi·ªác v√¨ ti·ªÅn</h2>
                    <h3>B√†i h·ªçc b·∫Øt ƒë·∫ßu:</h3>
                    <p>"Ta s·∫Ω tr·∫£ cho c√°c con 10 xu m·ªôt gi·ªù."</p>
                    <p>Ngay c·∫£ v√†o nh·ªØng nƒÉm 1950, 10 xu m·ªôt gi·ªù c≈©ng l√† qu√° th·∫•p.</p>
                    <p>Bu·ªïi s√°ng h√¥m ·∫•y, cha c·ªßa Mike h·∫πn g·∫∑p t√¥i v√† n√≥ l√∫c 8 gi·ªù. V√¨ l√† ch·ªß c·ªßa m·ªôt kho h√†ng, m·ªôt c√¥ng ty x√¢y d·ª±ng, m·ªôt s·ªë c·ª≠a hi·ªáu v√† ba qu√°n ƒÉn, n√™n √¥ng r·∫•t b·∫≠n r·ªôn...</p>
                    <p>Khi ch√∫ng t√¥i ƒë·∫øn, cha Mike ƒëang n√≥i chuy·ªán ƒëi·ªán tho·∫°i v√† ch√∫ng t√¥i ph·∫£i ng·ªìi ch·ªù √¥ng ·ªü bƒÉng gh·∫ø ngo√†i hi√™n sau, c√πng v·ªõi hai ng∆∞·ªùi ph·ª• n·ªØ v√† m·ªôt ng∆∞·ªùi ƒë√†n √¥ng trung ni√™n l√†m nhi·ªám v·ª• qu·∫£n l√Ω nh√† h√†ng v√† coi kho cho cha c·ªßa Mike.</p>
                    <p>Hai ƒë·ª©a t√¥i ƒë√£ ng·ªìi ch·ªù r·∫•t l√¢u, r·ªìi khi t√¥i c·∫£m th·∫•y m√¨nh ƒë√£ b·∫Øt ƒë·∫ßu m·∫•t h·∫øt ki√™n nh·∫´n, th√¨nh l√¨nh cha Mike xu·∫•t hi·ªán. Mike v√† t√¥i gi·∫≠t m√¨nh b·∫≠t ƒë·ª©ng l√™n.</p>
                    <p>"S·∫µn s√†ng h·ªçc ch∆∞a, c√°c con?" Cha Mike h·ªèi, k√©o m·ªôt c√°i gh·∫ø ƒë·∫øn ng·ªìi v·ªõi ch√∫ng t√¥i.</p>
                    <p>T√¥i v√† Mike c√πng g·∫≠t ƒë·∫ßu.</p>
                    <p>"T·ªët. Cha s·∫Ω d·∫°y c√°c con, nh∆∞ng kh√¥ng ph·∫£i theo ki·ªÉu trong l·ªõp h·ªçc. N·∫øu c√°c con l√†m vi·ªác cho cha, cha s·∫Ω d·∫°y c√°c con c√°ch l√†m gi√†u. N·∫øu kh√¥ng, cha s·∫Ω kh√¥ng d·∫°y... Th·∫ø ƒë·∫•y ƒë·ªìng √Ω hay kh√¥ng l√† t√πy c√°c con."</p>
                    <h3>B√ÄI H·ªåC S·ªê 1:</h3>
                    <p><strong>Ng∆∞·ªùi ngh√®o l√†m vi·ªác v√¨ ti·ªÅn b·∫°c. Ng∆∞·ªùi gi√†u bu·ªôc ti·ªÅn b·∫°c l√†m vi·ªác v√¨ m√¨nh.</strong></p>
                `
            },
            {
                title: "Ch∆∞∆°ng 3: T·∫°i sao ph·∫£i d·∫°y con v·ªÅ t√†i ch√≠nh?",
                content: `
                    <h2>CH∆Ø∆†NG 3: B√†i 2 - T·∫°i sao ph·∫£i d·∫°y con v·ªÅ t√†i ch√≠nh?</h2>
                    <p>H·∫ßu h·∫øt m·ªçi ng∆∞·ªùi kh√¥ng nh·∫≠n ra r·∫±ng: trong cu·ªôc s·ªëng, v·∫•n ƒë·ªÅ kh√¥ng ph·∫£i l√† b·∫°n ki·∫øm ƒë∆∞·ª£c bao nhi√™u ti·ªÅn m√† l√† b·∫°n gi·ªØ ƒë∆∞·ª£c bao nhi√™u ti·ªÅn v√† l√†m cho n√≥ sinh s√¥i n·∫£y n·ªü nh∆∞ th·∫ø n√†o.</p>
                    <p>ƒêi·ªÅu ƒë√≥ c≈©ng gi·ªëng nh∆∞ tr·ªìng m·ªôt c√°i c√¢y v·∫≠y. Ban ƒë·∫ßu, b·∫°n s·∫Ω ph·∫£i m·∫•t r·∫•t nhi·ªÅu c√¥ng s·ª©c ƒë·ªÉ chƒÉm b√≥n n√≥, ƒë·∫øn m·ªôt ng√†y n√†o ƒë√≥, khi r·ªÖ c√¢y ƒë√£ ƒë√¢m s√¢u v√†o l√≤ng ƒë·∫•t, c√°i c√¢y ƒë√£ ƒë·ªß l·ªõn ƒë·ªÉ t·ª± m√¨nh ph√°t tri·ªÉn, b·∫°n s·∫Ω kh√¥ng c·∫ßn ph·∫£i t·ªën c√¥ng chƒÉm b√≥n n·ªØa m√† v·∫´n c√≥ th·ªÉ ƒë∆∞·ª£c h∆∞·ªüng nh·ªØng m√πa qu·∫£ ng·ªçt l√†nh.</p>
                    <p>Mu·ªën cho c√°i c√¢y ti·ªÅn b·∫°c c·ªßa b·∫°n ph√°t tri·ªÉn, b·∫°n ph·∫£i c√≥ nhi·ªÅu ki·∫øn th·ª©c v·ªÅ t√†i ch√≠nh ƒë·ªÉ bi·∫øt chƒÉm b√≥n n√≥ th·∫≠t ƒë√∫ng c√°ch.</p>
                    <h3>Quy lu·∫≠t 1:</h3>
                    <p><strong>B·∫°n ph·∫£i bi·∫øt s·ª± kh√°c nhau gi·ªØa t√†i s·∫£n (asset) v√† ti√™u s·∫£n (liability) v√† ƒë·ªÉ ƒë∆∞·ª£c gi√†u c√≥, b·∫°n ph·∫£i mua t√†i s·∫£n.</strong></p>
                    <p>Nghe th√¨ c√≥ v·∫ª ƒë∆°n gi·∫£n ƒë·∫øn bu·ªìn c∆∞·ªùi, nh∆∞ng h·∫ßu h·∫øt m·ªçi ng∆∞·ªùi ƒë·ªÅu kh√¥ng bi·∫øt ƒë∆∞·ª£c n√≥ uy√™n th√¢m ƒë·∫øn m·ª©c n√†o, v√¨ h·ªç kh√¥ng bi·∫øt ƒë∆∞·ª£c s·ª± kh√°c nhau gi·ªØa m·ªôt t√†i s·∫£n v√† m·ªôt ti√™u s·∫£n l√† ·ªü ƒë√¢u.</p>
                    <p>"Ng∆∞·ªùi gi√†u ki·∫øm ƒë∆∞·ª£c t√†i s·∫£n. Ng∆∞·ªùi ngh√®o v√† ng∆∞·ªùi trung l∆∞u ch·ªâ thu ƒë∆∞·ª£c ti√™u s·∫£n, nh∆∞ng h·ªç nghƒ© r·∫±ng h·ªç ƒë√£ ki·∫øm ƒë∆∞·ª£c t√†i s·∫£n."</p>
                    <p>Ng∆∞·ªùi cha gi√†u ƒë√£ n√≥i v·ªõi hai ch√∫ng t√¥i m·ªôt c√°ch ƒë∆°n gi·∫£n r·∫±ng: "T√†i s·∫£n b·ªè ti·ªÅn v√†o t√∫i c√°c con, c√≤n ti√™u s·∫£n th√¨ l√¥i ti·ªÅn ra kh·ªèi t√∫i."</p>
                    <p>N·∫øu b·∫°n mu·ªën tr·ªü n√™n gi√†u c√≥, h√£y mua t√†i s·∫£n. N·∫øu mu·ªën tr·ªü n√™n ngh√®o ƒëi, h√£y mua ti√™u s·∫£n.</p>
                `
            },
            {
                title: "Ch∆∞∆°ng 4: H√£y nghƒ© ƒë·∫øn vi·ªác kinh doanh c·ªßa m√¨nh",
                content: `
                    <h2>CH∆Ø∆†NG 4: B√†i 3 - H√£y nghƒ© ƒë·∫øn vi·ªác kinh doanh c·ªßa m√¨nh</h2>
                    <p>M·ªôt ng∆∞·ªùi b·∫°n c·ªßa t√¥i t√™n l√† Keith Cunningham, khi ƒëang theo h·ªçc m·ªôt l·ªõp MBA c·ªßa ƒë·∫°i h·ªçc Texas ·ªü Austin, ƒë√£ ƒë∆∞·ª£c nghe Ray Kroc, ng∆∞·ªùi s√°ng l·∫≠p McDonald's, n√≥i chuy·ªán. Ray ƒë√£ h·ªèi c·∫£ l·ªõp: "ƒê·ªë c√°c b·∫°n, t√¥i kinh doanh c√°i g√¨?"</p>
                    <p>H·∫ßu h·∫øt c√°c sinh vi√™n MBA ƒë·ªÅu c∆∞·ªùi v√¨ nghƒ© r·∫±ng Ray ƒëang n√≥i ƒë√πa. Kh√¥ng c√≥ ai tr·∫£ l·ªùi c·∫£, Ray l·∫°i h·ªèi l·∫ßn n·ªØa: "Theo c√°c b·∫°n th√¨ t√¥i kinh doanh c√°i g√¨?"</p>
                    <p>C√°c sinh vi√™n l·∫°i c∆∞·ªùi, v√† cu·ªëi c√πng m·ªôt ng∆∞·ªùi la to: "Ray, ai m√† kh√¥ng bi·∫øt √¥ng kinh doanh hamburger ch·ª©."</p>
                    <p>Ray t·ªè v·∫ª kho√°i tr√°: "T√¥i c≈©ng nghƒ© anh s·∫Ω n√≥i nh∆∞ v·∫≠y." √îng ng·ª´ng m·ªôt l√∫c v√† n√≥i nhanh: "N√†y c√°c b·∫°n, t√¥i kh√¥ng kinh doanh hamburger. T√¥i kinh doanh b·∫•t ƒë·ªông s·∫£n!"</p>
                    <p>Ray ƒë√£ d√πng ph·∫ßn l·ªõn th·ªùi gian h√¥m ƒë√≥ ƒë·ªÉ gi·∫£i th√≠ch nh·ªØng quan ƒëi·ªÉm c·ªßa √¥ng. Ray ch√∫ tr·ªçng v√†o vi·ªác b√°n hamburger, nh∆∞ng √¥ng kh√¥ng bao gi·ªù qu√™n ƒë·ªÉ m·∫Øt t·ªõi v·ªã tr√≠ bu√¥n b√°n. √îng bi·∫øt r·∫±ng b·∫•t ƒë·ªông s·∫£n v√† v·ªã tr√≠ c·ªßa n√≥ l√† nh√¢n t·ªë quan tr·ªçng nh·∫•t trong s·ª± th√†nh c√¥ng c·ªßa vi·ªác kinh doanh.</p>
                    <h3>B√≠ m·∫≠t th·ª© 3 c·ªßa nh·ªØng ng∆∞·ªùi gi√†u:</h3>
                    <p><strong>"H√£y nghƒ© ƒë·∫øn vi·ªác kinh doanh c·ªßa ch√≠nh m√¨nh."</strong></p>
                    <p>Nh·ªØng kh√≥ khƒÉn t√†i ch√≠nh th∆∞·ªùng l√† k·∫øt qu·∫£ tr·ª±c ti·∫øp do ng∆∞·ªùi ta su·ªët ƒë·ªùi ph·∫£i l√†m vi·ªác cho ng∆∞·ªùi kh√°c. Sau nh·ªØng chu·ªói ng√†y l√†m vi·ªác v·∫•t v·∫£, nhi·ªÅu ng∆∞·ªùi kh√¥ng c√≥ ƒë∆∞·ª£c g√¨ c·∫£.</p>
                `
            }
        ];

        // Initialize variables
        let currentChapter = 0;
        let fontSize = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--font-base'));
        let isDarkMode = false;
        let bookmarks = JSON.parse(localStorage.getItem('bookmarks')) || [];
        let isMobile = window.innerWidth <= 768;
        let isTablet = window.innerWidth > 768 && window.innerWidth <= 1024;
        
        // Detect device type
        function detectDevice() {
            isMobile = window.innerWidth <= 768;
            isTablet = window.innerWidth > 768 && window.innerWidth <= 1024;
            
            // Auto close sidebar on mobile
            if (isMobile && !sidebar.classList.contains('hidden')) {
                sidebar.classList.add('hidden');
                mainContent.classList.add('full-width');
            }
            
            // Auto show sidebar on desktop
            if (!isMobile && !isTablet) {
                sidebar.classList.remove('hidden');
                mainContent.classList.remove('full-width');
            }
        }
        
        // Handle resize
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                detectDevice();
                adjustFontSize();
            }, 250);
        });
        
        // Adjust font size based on viewport
        function adjustFontSize() {
            const vw = window.innerWidth;
            let baseFontSize;
            
            if (vw <= 360) baseFontSize = 14;
            else if (vw <= 480) baseFontSize = 15;
            else if (vw <= 768) baseFontSize = 16;
            else if (vw <= 1024) baseFontSize = 17;
            else if (vw <= 1440) baseFontSize = 18;
            else baseFontSize = 19;
            
            const savedFontSize = localStorage.getItem('fontSize');
            if (savedFontSize) {
                fontSize = parseInt(savedFontSize);
            } else {
                fontSize = baseFontSize;
            }
            
            document.getElementById('contentWrapper').style.fontSize = fontSize + 'px';
        }
        
        // DOM elements
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.getElementById('mainContent');
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = document.getElementById('themeIcon');
        const fullscreenToggle = document.getElementById('fullscreenToggle');
        const bookContent = document.getElementById('bookContent');
        const chapterItems = document.querySelectorAll('.chapter-item');
        const prevChapter = document.getElementById('prevChapter');
        const nextChapter = document.getElementById('nextChapter');
        const fontIncrease = document.getElementById('fontIncrease');
        const fontDecrease = document.getElementById('fontDecrease');
        const bookmarkBtn = document.getElementById('bookmarkBtn');
        const backToTop = document.getElementById('backToTop');
        const readingProgress = document.getElementById('readingProgress');
        const searchInput = document.getElementById('searchInput');
        const readingTime = document.getElementById('readingTime');
        const loading = document.getElementById('loading');

        // Toggle sidebar
        menuToggle.addEventListener('click', () => {
            sidebar.classList.toggle('hidden');
            mainContent.classList.toggle('full-width');
        });

        // Theme toggle
        themeToggle.addEventListener('click', () => {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark-mode');
            themeIcon.textContent = isDarkMode ? '‚òÄÔ∏è' : 'üåô';
            themeToggle.querySelector('span:last-child').textContent = isDarkMode ? 'Ch·∫ø ƒë·ªô s√°ng' : 'Ch·∫ø ƒë·ªô t·ªëi';
            localStorage.setItem('darkMode', isDarkMode);
        });

        // Fullscreen toggle
        fullscreenToggle.addEventListener('click', () => {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        });

        // Load chapter
        function loadChapter(index) {
            if (index >= 0 && index < bookChapters.length) {
                loading.classList.add('show');
                setTimeout(() => {
                    currentChapter = index;
                    bookContent.innerHTML = bookChapters[index].content;
                    updateChapterSelection();
                    updateNavButtons();
                    updateReadingTime();
                    checkBookmark();
                    window.scrollTo(0, 0);
                    loading.classList.remove('show');
                }, 300);
            }
        }

        // Update chapter selection
        function updateChapterSelection() {
            chapterItems.forEach((item, index) => {
                item.classList.toggle('active', index === currentChapter);
            });
        }

        // Update navigation buttons
        function updateNavButtons() {
            prevChapter.disabled = currentChapter === 0;
            nextChapter.disabled = currentChapter === bookChapters.length - 1;
        }

        // Chapter navigation
        chapterItems.forEach((item, index) => {
            item.addEventListener('click', () => {
                loadChapter(index);
            });
        });

        prevChapter.addEventListener('click', () => {
            if (currentChapter > 0) {
                loadChapter(currentChapter - 1);
            }
        });

        nextChapter.addEventListener('click', () => {
            if (currentChapter < bookChapters.length - 1) {
                loadChapter(currentChapter + 1);
            }
        });

        // Font size controls
        fontIncrease.addEventListener('click', () => {
            if (fontSize < 30) {
                fontSize += 2;
                document.getElementById('contentWrapper').style.fontSize = fontSize + 'px';
                localStorage.setItem('fontSize', fontSize);
            }
        });

        fontDecrease.addEventListener('click', () => {
            if (fontSize > 12) {
                fontSize -= 2;
                document.getElementById('contentWrapper').style.fontSize = fontSize + 'px';
                localStorage.setItem('fontSize', fontSize);
            }
        });

        // Bookmark functionality
        bookmarkBtn.addEventListener('click', () => {
            const chapterId = `chapter-${currentChapter}`;
            const bookmarkIndex = bookmarks.indexOf(chapterId);
            
            if (bookmarkIndex === -1) {
                bookmarks.push(chapterId);
                bookmarkBtn.classList.add('bookmarked');
                showTooltip('ƒê√£ ƒë√°nh d·∫•u ch∆∞∆°ng n√†y');
            } else {
                bookmarks.splice(bookmarkIndex, 1);
                bookmarkBtn.classList.remove('bookmarked');
                showTooltip('ƒê√£ x√≥a ƒë√°nh d·∫•u');
            }
            
            localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
        });

        function checkBookmark() {
            const chapterId = `chapter-${currentChapter}`;
            if (bookmarks.includes(chapterId)) {
                bookmarkBtn.classList.add('bookmarked');
            } else {
                bookmarkBtn.classList.remove('bookmarked');
            }
        }

        // Show tooltip
        function showTooltip(message) {
            const tooltip = document.createElement('div');
            tooltip.className = 'tooltip show';
            tooltip.textContent = message;
            tooltip.style.position = 'fixed';
            tooltip.style.top = '50%';
            tooltip.style.left = '50%';
            tooltip.style.transform = 'translate(-50%, -50%)';
            document.body.appendChild(tooltip);
            
            setTimeout(() => {
                tooltip.remove();
            }, 2000);
        }

        // Back to top
        backToTop.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // Show/hide back to top button
        window.addEventListener('scroll', () => {
            const scrollPosition = window.pageYOffset;
            const windowHeight = window.innerHeight;
            const documentHeight = document.documentElement.scrollHeight;
            
            // Show/hide back to top
            if (scrollPosition > 300) {
                backToTop.classList.add('visible');
            } else {
                backToTop.classList.remove('visible');
            }
            
            // Update reading progress
            const progress = (scrollPosition / (documentHeight - windowHeight)) * 100;
            readingProgress.style.width = progress + '%';
        });

        // Search functionality
        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            chapterItems.forEach(item => {
                const text = item.textContent.toLowerCase();
                if (text.includes(searchTerm)) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        });

        // Calculate reading time
        function updateReadingTime() {
            const text = bookContent.textContent;
            const wordsPerMinute = 200;
            const words = text.trim().split(/\s+/).length;
            const minutes = Math.ceil(words / wordsPerMinute);
            readingTime.textContent = `${minutes} ph√∫t`;
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft' && !prevChapter.disabled) {
                loadChapter(currentChapter - 1);
            } else if (e.key === 'ArrowRight' && !nextChapter.disabled) {
                loadChapter(currentChapter + 1);
            } else if (e.key === 'b' && e.ctrlKey) {
                bookmarkBtn.click();
            } else if (e.key === 'd' && e.ctrlKey) {
                e.preventDefault();
                themeToggle.click();
            } else if (e.key === 'm' && e.ctrlKey) {
                e.preventDefault();
                menuToggle.click();
            }
        });

        // Load saved preferences
        function loadPreferences() {
            // Dark mode
            const savedDarkMode = localStorage.getItem('darkMode') === 'true';
            if (savedDarkMode) {
                isDarkMode = true;
                document.body.classList.add('dark-mode');
                themeIcon.textContent = '‚òÄÔ∏è';
                themeToggle.querySelector('span:last-child').textContent = 'Ch·∫ø ƒë·ªô s√°ng';
            }
            
            // Font size
            const savedFontSize = localStorage.getItem('fontSize');
            if (savedFontSize) {
                fontSize = parseInt(savedFontSize);
                document.getElementById('contentWrapper').style.fontSize = fontSize + 'px';
            }
            
            // Last reading position
            const lastChapter = localStorage.getItem('lastChapter');
            if (lastChapter) {
                currentChapter = parseInt(lastChapter);
            }
        }

        // Save reading position
        window.addEventListener('beforeunload', () => {
            localStorage.setItem('lastChapter', currentChapter);
        });

        // Initialize
        detectDevice();
        adjustFontSize();
        loadPreferences();
        loadChapter(currentChapter);

        // Mobile menu close on chapter select
        chapterItems.forEach(item => {
            item.addEventListener('click', () => {
                if (isMobile || isTablet) {
                    sidebar.classList.add('hidden');
                    document.body.style.overflow = '';
                    removeOverlay();
                }
            });
        });

        // Touch swipe support for chapter navigation
        let touchStartX = 0;
        let touchEndX = 0;
        
        document.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });
        
        document.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipeGesture();
        });
        
        function handleSwipeGesture() {
            const swipeThreshold = 100;
            const diff = touchStartX - touchEndX;
            
            if (Math.abs(diff) > swipeThreshold) {
                if (diff > 0 && !nextChapter.disabled) {
                    // Swipe left - next chapter
                    loadChapter(currentChapter + 1);
                } else if (diff < 0 && !prevChapter.disabled) {
                    // Swipe right - previous chapter
                    loadChapter(currentChapter - 1);
                }
            }
        }

        // Auto-hide header on scroll (mobile)
        let lastScrollTop = 0;
        const header = document.querySelector('.header');
        let scrollTimeout;
        
        window.addEventListener('scroll', () => {
            clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(() => {
                if (isMobile || isTablet) {
                    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                    if (scrollTop > lastScrollTop && scrollTop > 100) {
                        header.style.transform = 'translateY(-100%)';
                    } else {
                        header.style.transform = 'translateY(0)';
                    }
                    lastScrollTop = scrollTop;
                }
            }, 100);
        });
        
        // Prevent zoom on double tap (iOS)
        let lastTouchEnd = 0;
        document.addEventListener('touchend', (e) => {
            const now = Date.now();
            if (now - lastTouchEnd <= 300) {
                e.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
        
        // Add CSS for smooth transitions
        const style = document.createElement('style');
        style.textContent = `
            .header {
                transition: transform 0.3s ease;
            }
            
            @media (prefers-reduced-motion: reduce) {
                * {
                    animation: none !important;
                    transition: none !important;
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
